<!DOCTYPE html>
<html>
    <head>
        <title>Media Station X for TorrServer</title>
        <meta charset="UTF-8" />
        <meta name="author" content="damiva" />
        <meta name="copyright" content="damiva" />
        <link type="image/png" rel="shortcut icon" href="https://msx.benzac.de/img/icon.png" /> 
        <link type="image/png" rel="apple-touch-icon" href="https://msx.benzac.de/img/icon.png" />
        <style>
            html {height: 100%; margin: 0; padding: 0}
            body {
                font-family: Arial, Helvetica, sans-serif; 
                display: grid; grid-template: max-content auto min-content / min-content;
                margin: auto 0; padding: 0; height: 100%;
            }
            header, footer  {background-color: steelblue; color: white;}
            main            {overflow: auto;}
            button          {width: 2em;}
            input, button   {height: 2em;}
            #error          {color: red;}
            #error:empty    {display: none;}
            #error::before  {content: "‚ö† ";}
        </style>
        <script>
            function ajax(u, f, d){
                var x = new XMLHttpRequest(), v = typeof f == "string", s = document.getElementById("stg");
                e.disabled = true;
                x.responseType = "json";
                x.onloadend = function(){
                    var e = document.getElementById("files");
                    e.value = e.defaultValue = x.response.files || "";
                    document.getElementById("error").innerText = x.status != 200 ? (x.statusText + ": " + x.responseText) : (f["error"] || "");
                    document.getElementById("files").disabled = true;
                    if(v || x.status == 200) e.disabled = false;
                }
                x.open("GET", u + (v ? ("files=" + encodeURIComponent(f)) : ""));
                s.send();
            }
            window.onload = function(){
                var e = document.getElementById("lang");
                e.onclick = function(){
                    var l = this.value;
                    this.value = l == "üá∑üá∫" ? "üá¨üáß" : "üá∑üá∫";
                    document.querySelectorAll("[lang]").forEach(e => e.hidden = e.lang != l);
                };
                e.onclick();
                e = document.getElementById("msx");
                if(!(e.hidden = window.location.hostname == "damiva.github.io")){
                    e.href = e.href.replace("{ORIG}", window.location.origin);
                    document.getElementById("addr").innerText = window.location.host;
                    e = document.forms[0];
                    e.hidden = false;
                    ajax();
                    e.files.onchange = function(){document.getElementById("send").disabled = this.value == this.defaultValue};
                    e.onsubmit = function(){
                        if(this.files.value != this.files.defaultValue) ajax(this.files.value);
                        return false;
                    };
                }
            }
        </script>
    </head>
    <body>
        <header>
            <img src="https://msx.benzac.de/img/icon.png" style="height:1em;">
            TorrServer <span lang="en">on</span><span lang="ru">–Ω–∞</span> Media Station X
            <button style="float: right;" id="lang"></button>
        </header>
        <main>
            <b lang="en">TV-set instalation</b><b lang="ru">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä</b>:
            <ol>
                <li>
                    <span lang="en">On yuor TV-set install and launch the application:</span>
                    <span lang="ru">–ù–∞ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:</span>
                    <a href="https://msx.benzac.de/info/">Media Station X</a>
                </li>
                <li>
                    <span lang="en">Navigate to</span><span lang="ru">–ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫</span>:
                    <b>Settings ‚áí Start Parameter ‚áí Setup</b>
                </li>
                <li>
                    <span lang="en">Enter the address of</span><span lang="ru">–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å</span>
                    TorrServer: <b id="addr">&lt;IP&gt;:&lt;PORT&gt;</b>
                </li>
                <li>
                    <span lang="en">Press</span><span lang="ru">–ù–∞–∂–º–∏—Ç–µ</span>
                    <b>Yes</b> <span lang="en">to</span><span lang="ru">–Ω–∞</span>
                    <b>Complete the setup</b>
                </li>
                <li>
                    <span lang="en">Enjoy your content</span><span lang="ru">–ù–∞—Å–ª–æ–∂–¥–∞–π—Ç–µ—Å—å –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º</span>
                </li>
            </ol>
            <a id="msx" href="//msx.benzac.de/?start=menu:{ORIG}/msx/plugin.html">
                <b lang="en">Run MSX in web-browser</b><b lang="ru">–ó–∞–ø—É—Å–∫ MSX –≤ –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä–µ</b>
            </a>
            <fieldset id="stg" style="width: msx-content;">
                <legend>
                    <b lang="en">Playing "My files" from the server</b><b lang="ru">–ü—Ä–æ—Å–º–æ—Ç—Ä "–ú–æ–∏—Ö —Ñ–∞–ª–æ–≤" —Å —Å–µ—Ä–≤–µ—Ä–∞</b>:
                </legend>
                <b id="error"></b>
                <label>
                    <i lang="en">Path to the folder</i><i lang="ru">–ü—É—Ç—å –∫ –ø–∞–ø–∫–µ</i>:
                    <input id="files">
                </label><button id="send">‚úÖ</button>
            </fieldset>
        </main>
        <footer style="text-align: center;">¬© damiva 2024</footer>
    </body>
</html>